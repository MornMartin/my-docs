# 操作系统
## 1. 操作系统概论
### 1.1 操作系统的概念
#### 1.1.1 计算机系统

计算机系统：一种可以按用户要求接收和存储信息、自动进行数据处理并输出结果信息的系统。其包含：
* 硬件系统：计算机赖以工作的实体。
* 软件系统：计算机按用户指定的要求协调工作。

操作系统：它是一些程序模块的集合，他们能**有效组织和管理计算机系统中的硬件及软件资源**，合理组织计算机工作流程。有着与其他软件相比所不同的特征：
* 并发性：指在计算机系统中同时存在多个运行着的程序。宏观上看，这些程序在同时向前推进；微观上看，单处理器环境下，这些程序交替在处理器上运行，多处理器时也为并发。
* 共享性：指操作系统程序与多个用户程序共用系统中的各种资源。
    * 互斥共享：当某个资源被占用时，其他请求该资源的程序必须等待。
    * 同时共享：同一段时间内，资源可以被多个程序同时（宏观）访问。
* 随机性：操作系统不能对所运行的程序的行为，以及硬件设备的情况做出事先的假定，强调在进行操作系统设计与实现时要充分考虑各种各样的可能性。

研究操作系统的观点：
1. 软件的观点：操作系统是一种大型的软件系统，具有外在特性和内在特性。
2. 资源管理的观点：操作系统负责登记硬件资源的使用情况，响应资源请求，分配/协调空闲资源。
3. 进程的观点：操作系统控制和协调用户进程和系统进程，管理任务相互之间的关系。
4. 虚拟器的观点：操作系统把原来的计算机扩充成为功能强，使用方便的计算机系统（虚拟计算机）
5. 服务提供者观点：操作系统提供了一系列的功能和便利工作环境为用户服务，则可以把操作系统看作是服务提供者。

操作系统的功能：
1. 进程管理：解决有关处理器分配调度策略、分配的实施和回收等问题
    1. 进程控制：创建进程、撤销结束的进程以及控制进程运行时各种状态的转换。
    2. 进程同步：协调相互协作共同完成任务的进程之间的执行顺序。
    3. 进程间通信：提供相互协作进程之间的数据和信息交换。
    4. 调度：从进程的就绪队列中按照一定算法挑选出一个将处理器资源分配给他，并准备好特定的执行上下文让它执行起来。
2. 存储管理：管理计算机的内存资源
    1. 内存的分配与回收：为每个进程分配内存空间，在分配过程中还要尽可能提高内存资源的使用效能；对于以退出的进程，要对内存加以回收，重新使用。
    2. 存储保护：防止程序运行在被分配内存外运行（越界）对计算机的危害。
    3. 内存扩充：借助于虚拟存储技术，在逻辑上增加进程运行空间的大小。
3. 文件管理：有效地支持文件的存储、检索和修改等操作。
    1. 文件存储空间的管理：为文件分配外存储空间，并且尽可能地提高外存储空间的利用率和文件访问的效能。
    2. 目录管理：给出组织文件的方法。
    3. 文件系统的安全性：防止不正确的方式访问文件。
4. 设备管理：用户通过操作系统提供的设备管理手段对外部设备进行操作。
5. 用户接口：向用户提供使用自己的手段。

#### 1.1.2 操作系统的体系结构

Windows体系结构：分层的模块系统，硬件抽象层、内核和执行体都运行在保护模式下，子系统都在用于模式下运行。
1. 硬件抽象层（HAL）：多种硬件平台可移植性能力的关键部分，为运行在Windows操作系统的硬件平台提供低级接口。
2. 内核：执行Windows操作系统中最基本的操作，如线程调度、陷入处理和异常调度、中断处理和调度以及多处理器同步等。
3. 执行体：从用户态导出并且可以调用的函数
4. 系统进程和系统线程：系统进程是只运行在核心态的系统线程的宿主。系统线程只能在核心态调用。

UNIX体系结构：从内到外分别是硬件、内核、系统调用接口、UNIX命令库或用户应用程序。
1. 内核层：操作系统的管理和控制中心。有两方面接口，分别是**内核与硬件接口和内核与shell接口**；有两大部分组成，分别是进程控制子系统和文件子系统。
2. 系统调用层：介于内核层和应用层之间，是供程序员设计、开发应用时调用。
3. 应用层：面向用户操作的界面。

Linux体系结构：有四个主要部分，即内核、shell、文件系统和用户应用程序。
1. 内核：负责进程、内存、设备驱动程序、文件和网络系统管理。
2. Shell（命令解释器）：是系统的用户界面，提供用户与内核进行交互操作的一种接口。
3. 文件系统：文件存储在磁盘等存储设备上的组织方法。
4. 应用程序。

Android体系结构：分四层，从低到高分别是Linux内核层、系统运行库层、应用框架层和应用程序层。

1. Linux内核层：包括系统层安全机制、内存管理、进程管理、网络堆栈及一系列的驱动模块，提供与硬件的交互。
2. C、C++本地库和Android运行时环境：Android包含一些C/C++库，通过应用框架为开发者提供服务；Android运行时环境提供核心链接库和虚拟系统。
3. Android应用框架层：为应用开发者提供用以访问核心功能的api框架。
4. Android应用程序：包括客户端、日历、地图等，用Java编写。

#### 1.1.3 操作系统的发展

1. 手工操作：通过在一些插板上的硬连线来控制计算机的基本功能（计算），程序设计全部采用机器语言。
2. 监控程序：操作员录入FORTRAN等高级语言程序后，计算机顺次输出结果（单道批处理）。
3. 多道批处理：允许多个程序同时存在于内存之中，由中央处理器以切换方式使多个程序可以同时执行，发展出操作系统。
4. 分时与实时系统：允许多个用户通过终端设备与计算机交互来运行自己的作业，共享同一个计算机系统而互不干扰。
5. UNIX通用操作系统：用C语言编写，是世界上唯一能在笔记本电脑、PC、工作站甚至巨型机上运行的操作系统，是现代操作系统的代表。
6. 个人计算机操作系统：20世纪70年代末，微软推出MS-DOS单用户单任务操作系统；1984年，苹果推出具有图形交互功能的操作系统；1991年，Linus推出继承UNIX全部优点的开源Linux系统。
7. Android操作系统：一款主要面向移动设备、基于Linux内核的开源操作系统。

