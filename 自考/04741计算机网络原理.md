# 计算机网络原理
## 1. 计算机网络概述
### 1.1 计算机网络基本概念
`计算机网络是计算机技术与通信技术相互融合的产物，计算机网络是互连的、自治的计算机的集合。`
* 自治： 互连的计算机系统彼此独立，不存在主从或者控制与被控制关系。
* 互连： 利用通信链路连接相互独立的计算机系统。通信链路可以是双绞线、光纤、微波、通信卫星等。

**协议三要素**： 语法、语义、时序
* 语法： 定义实体之间交换信息的格式与结构，或者定义实体（比如硬件设备）之间传输的电平。
* 语义： 实体间交换的信息，除了要传输的数据之外，通常还包括控制信息，针对不同的控制信息，接收端应如何响应。
* 时序： 定义实体之间交换信息的顺序以及如何匹配或适应彼此的速度。

**计算机网络的功能**：实现硬件资源共享、软件资源共享和信息资源共享。

**计算机网络的分类**：
* 按覆盖范围分类
   1. 个域网（PAN）：个人设备通过无线通信技术构成小范围网络，实现个人设备间的数据传输。范围1-10m
   2. 局域网（LAN）：通常部署在办公室、校园，采用高速有线或者无线链路连接主机，实现局部范围内高速数据传输。范围10m~1km
   3. 城域网（MAN）: 城域网是指覆盖一个城市范围的网络。范围5~50km
   4. 广域网（WAN）: 异地城域网或局域网的互连。
* 按拓扑结构分类

   `网络设备间的物理连接关系与布局`
   1. 总线型拓扑结构：采用一条广播信道作为公共传输介质，称为总线，所有结点均与总线连接，结点间的通信均通过共享的总线进行。
      * 优点：结构简单，所需电缆数量少，易于拓展。
      * 缺点：通信范围受限，故障诊断与隔离较困难，容易发生冲突。
   2. 星型拓扑结构： 采用一个中央结点与网络中的所有主机连接，主机之间的通信都通过中央结点进行，
      * 优点：易于监控管理，故障诊断与隔离容易。
      * 缺点：中央结点一旦故障，全网瘫痪，网络规模受限于中央结点的端口数量。
   3. 环形拓扑结构：利用通信链路将所有的结点连接成一个闭合的环，每个结点可以从环中接收数据，并向环中进一步转发数据。
      * 优点： 所需电缆长度短，可以使用光纤，易于避免冲突。
      * 缺点： 某结点故障容易引起全网瘫痪，新结点加入撤出麻烦，存在等待时间。
   4. 网状拓扑结构： 通过多条链路与不同结点直接连接。
      * 优点：可靠性高，一条或多条链路故障时，其他网络仍然可用。
      * 缺点：网络结构复杂，造价成本高。
   5. 树形拓扑结构： 通过级联星型拓扑网络的中央结点，构建树形网络结构。
      * 优点：易于拓展，易于故障隔离。
      * 缺点：对根节点的可靠性要求高，一旦故障，则可能导致大范围网络不可用。
   6. 混合拓扑网络：由两种以上简单拓扑网络混合连接而成的网络。
      * 优点：易于拓展，可以构建不同规模的网络。
      * 缺点：网络结构复杂，管理维护复杂。
* 按交换方式分

   `指通过彼此互连的结点间的数据转接，实现将数据从发送结点送达目的结点的过程和技术` [详见](#network-switching-technology)
* 按网络用户属性分类
   1. 公用网：由国家或企业出资建设，面向公众提供收费或免费服务的网络。
   2. 私有网：由某个组织出资建设，专门面向该组织内部业务提供网络传输服务，不向公众开放的网络。
### 1.2 计算机网络结构

网络边缘：连接到网络上的计算机、服务器、智能手机、智能家电等称为主机或端系统，这些端系统位于网络的最边缘，故称网络边缘。

接入网络：

* 电话拨号接入
* 非对称数字用户线路（ADSL）：独享，典型的下行带宽大于上行带宽。
* 混合光纤同轴电缆（HFC）接入网络：使用调制解调器连接有线电视网的入户同轴电缆，同轴电缆连接到光纤节点，在通过光纤链路连接电缆调制解调端系统，进而接入网络。

网络核心：由通信链路互连的分组交换设备构成的网络，作用是实现网络边缘主机之间，数据的中继与转发。比较典型的分组交换设备是路由器和交换机等。
### 1.3 数据交换技术

数据交换：在网络边缘的主机之间实现相互的数据传输、信息交换。

<b id="network-switching-technology">交换方式</b>：

   1. 电路交换：通过中间交换结点为两台主机之间建立一条专用的通信线路，称为电路，然后利用该电路进行通信，通信结束后再拆除电路。
      * 优点：实时性高，时延和时延抖动较小。
      * 缺点：对于突发性数据传输，信道利用率低，且传输速率单一。
   2. 报文交换：把要发送的信息附加上发送/接收主机的地址及其他控制信息，构成一个完整的报文，然后以报文为单位在交换网络的各个结点之间以**存储-转发**的方式传送，直至送达目的主机。 
      * 优点：信道利用率高。
      * 缺点：需要缓冲存储，网络的延时时间长且不固定，存在丢包现象。
   3. 分组交换：将待传输的数据分割成较小的数据块，每个数据库附加上地址、序号等控制信息构成数据分组，每个数据分组独立传输到目的地（同报文交换方式），目的地将收到的报文重新组装，还原为报文。
      * 优点：交换设备存储容量要求低，交换速度快，可靠传输效率高，更加公平。
      * 缺点：拆分组装报文造成一定的计算资源消耗，需要附加更多的控制信息，可能丢包。
### 1.4 计算机网络性能
速率：指网络单位时间内传送的数据量，有时也称为带宽。单位：Mbit/s、kbit/s、bit/s 等。

**时延**：指数据从网络中的一个结点（主机或交换设备）到达另一个结点所需要的时间。
   * 结点处理时延：每个分组到达交换结点时，验证分组报文、检索转发表以及可能修改分组的部分控制信息所消耗时间的总和。较小，一般忽略。
   * 排队时延：等待从输出链路发送到下一个交换结点（或目的主机）的等待时间，很不确定。
   * 传输时延：一个分组在输出链路发送时，从发送第一位开始，到发送最后一位为止，所用的时间。
   * 传播时延：分组中的每个比特在发送到物理介质上时，是利用物理信号的某种特征表示的。信号从发送端发送出来，经过一定距离的物理链路到达接收端所需要的时间。

时延带宽积：表示一段链路可以容纳的数据位数，也称为以位为单位的链路长度。

   `时延带宽积 = 传播时延 * 链路带宽`

吞吐量：网络实际可以达到的源主机到目的主机的数据传输速率，理想情况下约等于瓶颈链路数据。
### 1.5 计算机网络体系结构
`采用分层的方式类组织协议，每一层都有特定的功能，上一层利用下一层所提供的服务，完成本层的功能。`

**OSI参考模型**：理论体系结构，由高层到底层
* 应用层：为用户提供一个使用网络应用的接口，包括传送文件、电子邮件、P2P应用等。
* 表示层：为应用层提供一个一致的数据格式，使字符、格式等有差异的设备之间相互通信，还可以实现文本压缩/解压缩、数据加密/解密、字符编码等。
* 会话层： 逻辑上管理两台计算机建立和终止通信，核实双方身份是否有权参加会话。在建立会话以后，对进程间的对话进行控制。
* 传输层：分段/重组报文（区分发送和接收主机上的进程）、端到端（进程到进程）的可靠数据传输、流量控制和拥塞控制机制等。
* 网络层：转发与路由。
* 数据链路层：实现在相邻两结点之间的数据可靠而有效的传输。采用帧同步技术，实现有效的差错控制。
* 物理层：在传输介质上实现无结构比特流传输，规定设备之间的机械、电气、功能和规程4个特性。

**TCP/IP参考模型**：因特网体系结构，由上到下。
* 应用层：OSI参考模型的会话层和表示层的功能合并到了应用层来实现。
* 传输层：切割报文、保证端到端的可靠性，不涉及消息如何在网络中传输。传输层协议包括：
   * **TCP**：面向连接的传输控制协议，需要双方经过确认，建立连接，数据分组标称链路号有序传递，对方对收到的分组予以确认陈伟可靠传送方式，不确认为不可靠传送方式，数据传送完成，拆除链路。
   * **UDP**：无连接的用户数据报协议，没有建立和拆除链路的过程，要求每个分组带有全称地址，接收后需要对分组进行排序。
* 网络互连层：把数据分组发往目的网络或主机。
* 网络接口层：对应OSI参考模型中的数据链路层和物理层, 网络层IP分组在这一层被封装到底层网络的链路层数据帧中，并最终一比特流的形式在物理介质上进行传输。
### 1.6 计算机网络与因特网的发展简史
ARPAnet: 第一个分组交换计算机网络，也是当今因特网的祖先。

NCP: 网络控制协议，第一个主机到主机的协议。
